## Deadlock
### Dining Philosophers Problem
- 일어지나지 않을 사건을 기다리며 진행이 멈춰 버리는 현상

### 교착상태란
- 자원 할당 그래프
  ![Alt text](resource-allocation-graph.png)
  - 프로세스 = 원
  - 자원 종류 = 사각형
  - 자원의 개수는 자원 사각형 내에 점으로 표현
  - 프로세스가 어떤 자원을 `할당 받아 사용 중`이라면 자원에서 프로세스를 향해 화살표 표시
  - 프로세스가 어떤 자원을 `기다리고 있다면` 프로세스에서 자원으로 화살표 표시

### 교착 상태 발생 조건
> 네 가지 조건 중 하나라도 만족하지 않으면 교착 상태가 `발생하지 않음`<br/>
> 모두 만족하면 교착 상태가 `발생할 수 있음`
- 상호 배제: 한 프로세스가 사용하는 자원을 다른 프로세스가 사용할 수 없는 상태
- 점유와 대기: 자원을 할당 받은 상태에서 다른 자원을 기다리고 있는 상태
- 비선점: 어떤 프로세스도 다른 프로세스의 자원을 강제로 빼앗지 못하는 상태
- 원형 대기: 프로세스들이 원의 형태로 자원을 대기하는 상태

## Solution for Deadlock
- 예방, 회피, 검출 후 회복 등

### 교착 상태 예방
> - 교착 상태 발생 조건 중 하나를 없애버리기
> - 현실적 어려움이 많음
- 원형 대기 조건 없애기
  - 자원에 번호를 붙이고 오름차순으로 할당

### 교착 상태 회피
> - 교착 상태를 무분별한 자원 할당으로 인해 발생했다고 간주
> - 교착 상태가 발행하지 않을 만큼 할당
> - 배분할 수 있는 자원의 양을 고려하여 교착 상태가 발생하지 않을 만큼만 자원 배분

- 안전 순서열: 교착 상태 없이 안전하게 프로세스들에 자원을 할당할 수 있는 순서
- 안전 상태: 교착 상태 없이 모든 프로세스가 자원을 할당 받고 종료될 수 있는 상태 (안전 순서열이 있는 상태)
- 불안전 상태: 교착 상태가 발생할 수도 있는 상태

```
- 안전 상태에서 안전 상태로 움직이는 경우에만 자원을 할당하는 방식
- 항시 안전 상태를 유지하도록 자원을 할당하는 방식
- c.f) 은행원 알고리즘
```

### 교착 상태 검출 후 회복
- 선점을 통한 회복
  - 교착 상태가 해결될 때까지 한 프로세스 씩 자원을 몰아주는 방식
- 포르세스 강제 종료를 통한 회복
  - 모두 강제 종료 (-> 작업 내역을 잃을 위험)
  - 한 프로세스씩 강제 종료 (-> 오버헤드)